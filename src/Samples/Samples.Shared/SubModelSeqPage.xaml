<Page
  x:Class="Elmish.Uno.Samples.SubModelSeq.SubModelSeqPage"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:cmp="using:Elmish.Uno.Samples.Components"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
  xmlns:samples="using:Elmish.Uno.Samples"
  mc:Ignorable="d"
  Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
  d:DataContext="{d:DesignInstance Type=samples:DesignData, IsDesignTimeCreatable=True}">

  <Grid d:DataContext="{Binding SubModelSeq}" Padding="0,10">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <StackPanel
      Grid.Row="0"
      HorizontalAlignment="Center"
      Orientation="Horizontal"
      Padding="0,10">
      <Button
        Width="150"
        Margin="10"
        Command="{Binding AddCounter}"
        Content="Add counter" />
      <Button
        Width="150"
        Margin="10"
        Command="{Binding ToggleGlobalState}"
        Content="Toggle global state" />
    </StackPanel>
    <muxc:TreeView Grid.Row="1" ItemsSource="{Binding Counters}">
      <muxc:TreeView.ItemContainerStyle>
        <Style TargetType="muxc:TreeViewItem">
          <Setter Property="HorizontalContentAlignment" Value="Stretch" />
          <Setter Property="IsExpanded" Value="True" />
        </Style>
      </muxc:TreeView.ItemContainerStyle>
      <muxc:TreeView.ItemTemplate>
        <DataTemplate>
          <muxc:TreeViewItem x:Name="treeViewItem" ItemsSource="{Binding ChildCounters}">
            <Grid>
              <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
              </Grid.RowDefinitions>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
              </Grid.ColumnDefinitions>
              <TextBlock
                Grid.Row="0"
                Grid.ColumnSpan="4"
                Margin="0,5"
                Text="{Binding CounterIdText}" />
              <cmp:Counter Grid.Row="1" Grid.ColumnSpan="5" />
              <Button
                Grid.Row="2"
                Grid.Column="0"
                Margin="0,5"
                Command="{Binding AddChild}"
                Content="Add child" />
              <Button
                Grid.Row="2"
                Grid.Column="1"
                Margin="0,5"
                Command="{Binding Remove}"
                Content="×" />
              <Button
                Grid.Row="2"
                Grid.Column="2"
                Margin="0,5"
                Command="{Binding MoveUp}"
                Content="↑" />
              <Button
                Grid.Row="2"
                Grid.Column="3"
                Margin="0,5"
                Command="{Binding MoveDown}"
                Content="↓" />
              <TextBlock
                Grid.Row="0"
                Grid.Column="4"
                Margin="10,5,10,5"
                VerticalAlignment="Center">
                <Run Text="Global state:" />
                <Run Text="{Binding GlobalState}" />
              </TextBlock>
            </Grid>
          </muxc:TreeViewItem>
        </DataTemplate>
      </muxc:TreeView.ItemTemplate>
    </muxc:TreeView>
  </Grid>
</Page>
